{% extends 'base.html' %}
{% block title %}Daily Timings - Raahu, Gulika, Yamaganda Kaal{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Daily Timings: Raahu Kaal, Gulika Kaal, Yamaganda Kaal</h2>
  <form method="get" class="row g-3 mb-4">
    <div class="col-md-3">
      <label for="date" class="form-label">Date</label>
      <input type="date" class="form-control" id="date" name="date" value="{{ date.strftime('%Y-%m-%d') }}">
    </div>
    <div class="col-md-3">
      <label for="lat" class="form-label">Latitude</label>
      <input type="number" step="any" class="form-control" id="lat" name="lat" value="{{ lat }}">
    </div>
    <div class="col-md-3">
      <label for="lon" class="form-label">Longitude</label>
      <input type="number" step="any" class="form-control" id="lon" name="lon" value="{{ lon }}">
    </div>
    <div class="col-md-3 align-self-end">
      <button type="submit" class="btn btn-primary">Show Timings</button>
    </div>
  </form>
  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Timings for {{ date.strftime('%A, %d %B %Y') }}</h5>
      <ul class="list-group list-group-flush mt-3">
        <li class="list-group-item">
          <strong>Raahu Kaal:</strong>
          {% if raahu_start and raahu_end %}
            {{ raahu_start.strftime('%I:%M %p') }} – {{ raahu_end.strftime('%I:%M %p') }}
          {% else %}
            <span class="text-danger">Not found</span>
          {% endif %}
        </li>
        <li class="list-group-item">
          <strong>Gulika Kaal:</strong>
          {% if gulika_start and gulika_end %}
            {{ gulika_start.strftime('%I:%M %p') }} – {{ gulika_end.strftime('%I:%M %p') }}
          {% else %}
            <span class="text-danger">Not found</span>
          {% endif %}
        </li>
        <li class="list-group-item">
          <strong>Yamaganda Kaal:</strong>
          {% if yamaganda_start and yamaganda_end %}
            {{ yamaganda_start.strftime('%I:%M %p') }} – {{ yamaganda_end.strftime('%I:%M %p') }}
          {% else %}
            <span class="text-danger">Not found</span>
          {% endif %}
        </li>
      </ul>
      <div class="mt-3 text-muted">
        <small>All timings are in IST (Asia/Kolkata). Calculated using Swiss Ephemeris for the given coordinates.</small>
      </div>
    </div>
  </div>
</div>
{% endblock %}
